---
title: 计算机组成
date: 2020-03-18 14:17:27
categories: 理解计算机
tags:
---

# 计算机组成
计算机由硬件和软件两部分组成。

<!-- more -->

## 硬件
硬件组成其实非常简单，处理器、存储器、输入和输出设备就能构成一台计算机。

> 处理器：就是CPU，它由计算器和控制器组成。
>
> 存储器：内存储器+外存储器。内存储器就是指内存条，外存储器就是硬盘、U盘、光盘等。
>
> 输入设备：键盘、鼠标。
>
> 输出设备：显示器、耳机。

## 软件
软件部分由系统软件和应用软件组成。

系统软件就是我们常说的操作系统（windows、linux），它是覆盖硬件上的第一层软件，它直接管理所有硬件的资源，为用户完成所有与硬件有关的操作。

我们平常所使用的应用程序如QQ、微信、word等属于应用软件。应用软件是由**各种程序设计语言**编写的应用程序的集合，包括软件包和用户程序。



# 一些答疑解惑
## 操作系统、应用软件、硬件之间的关系
我常常会有这样的疑惑？我们日常生活中使用的各种软件，它们是怎么和硬件连接起来的？换句话说，这些应用软件是如何控制硬件完成各种任务，为我们生活服务的？

前面说过，操作系统是覆盖在硬件上的第一层软件，它直接管理着所有的硬件资源，并向用户提供操作界面。操作系统是一种特殊的软件，其他的应用软件是运行在操作系统之上的，这些应用程序可以使用操作系统提供的大量服务。也就是说操作系统是其他应用软件和硬件之间的接口，应用程序通过调用操作系统提供的服务控制硬件的运转。


## 进程与应用程序
程序是一组指令的有序集合，它是一个静态的实体。

进程是程序的关于某数据集合上的一次运行活动。它可以申请和拥有系统资源，是一个动态的概念，是一个活动的实体。用大白话来说，进程就是程序的执行过程。

进程是一个活动过程，它会占用系统资源。操纵系统能同时运行多少个进程，是和进程所占用的资源数相关，它所占用的资源不能超过硬件的限制。硬件的上限越高，能同时运行的进程数就越多，所以我们的平时在装机的时候都追求更好的CPU、更大的内存。

一个应用程序（如QQ、chorme）的运行会占用一个或者多个进程。


## 用户空间、内核空间
用户空间就是用户进程所在的内存空间，相对的，系统空间就是系统进程所在的内存空间。我们知道，用户进程和系统进程的数据都存放在内存当中，那么由谁来划分内存空间呢？事实上，在开机之前，内存就是一块原始的物理内存。开机通电之后，操作系统就对物理内存进行了划分。

为什么要将内存空间划分为用户空间和系统空间呢？这当然是由必要的。用户有用户的数据，系统有系统的数据，如果混在一起，会阻碍系统的运行。

* 分开存放，系统和用户的数据不会混在一起，保证系统的稳定性。
* 分开存放，将两部分数据隔开，可以进行访问控制，防止用户程序错误或者恶意篡改程序。

简单来说，用户空间是用户程序的运行的空间，内核空间的系统内核程序的运行空间。他们是隔离的，即使用户程序崩溃了，也不会影响系统内核。

```js
str = "my string" // 用户空间
x = x + 2
file.write(str) // 切换到内核空间

y = x + 4 // 切换回用户空间
```
上面代码中，第一行和第二行都是简单的赋值运算，在 User space 执行。第三行需要写入文件，就要切换到 Kernel space，因为用户不能直接写文件，必须通过内核安排。第四行又是赋值运算，就切换回 User space。

## 用户态、内核态
CPU有两种工作状态：用户态和内核态。

当一个任务（进程）执行系统调用而陷入内核代码（系统代码）执行的时候，我们称CPU处于内核运行状态，简称内核态。当进程执行自己本身的代码的时候，我们称CPU处于用户态。

CPU处于内核态，CPU执行的是操作系统的代码，可以执行任意命令，调用系统的一切资源。（可以访问所有内存空间数据）

CPU处于用户态，CPU执行进程自身代码，不能调用系统资源。（只能访问用户空间的数据）


## 如何理解系统调用
我们所说的操作系统的内核，它是一种特殊的软件程序，特殊在哪儿呢？它控制计算机的硬件资源，例如协调CPU资源，分配内存资源，并且提供稳定的环境供应用程序运行。用户态就是用户应用程序运行的空间，为了使这些应用程序访问到内核管理的资源例如CPU，内存，I/O。内核必须提供一组通用的访问接口，这些接口就叫系统调用。

# 参考资料
[阮一峰的博客：User space 与 Kernel space](http://www.ruanyifeng.com/blog/2016/12/user_space_vs_kernel_space.html)

[内核态(内核空间)和用户态(用户空间)的区别和联系](https://blog.csdn.net/b1480521874/article/details/81370043)

[怎样去理解Linux用户态和内核态？](https://zhuanlan.zhihu.com/p/69554144)



